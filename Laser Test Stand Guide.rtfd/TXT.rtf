{\rtf1\ansi\ansicpg1252\cocoartf2578
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Helvetica;\f1\fswiss\fcharset0 Helvetica-BoldOblique;\f2\fswiss\fcharset0 Helvetica-Oblique;
\f3\fnil\fcharset0 Menlo-Regular;}
{\colortbl;\red255\green255\blue255;\red0\green0\blue0;}
{\*\expandedcolortbl;;\csgray\c0;}
{\*\listtable{\list\listtemplateid1\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid1\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{hyphen\}}{\leveltext\leveltemplateid2\'01\uc0\u8259 ;}{\levelnumbers;}\fi-360\li1440\lin1440 }{\listname ;}\listid1}
{\list\listtemplateid2\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid101\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid2}
{\list\listtemplateid3\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid201\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid3}
{\list\listtemplateid4\listhybrid{\listlevel\levelnfc0\levelnfcn0\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{decimal\}.}{\leveltext\leveltemplateid301\'02\'00.;}{\levelnumbers\'01;}\fi-360\li720\lin720 }{\listname ;}\listid4}
{\list\listtemplateid5\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid401\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid5}
{\list\listtemplateid6\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid501\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid6}}
{\*\listoverridetable{\listoverride\listid1\listoverridecount0\ls1}{\listoverride\listid2\listoverridecount0\ls2}{\listoverride\listid3\listoverridecount0\ls3}{\listoverride\listid4\listoverridecount0\ls4}{\listoverride\listid5\listoverridecount0\ls5}{\listoverride\listid6\listoverridecount0\ls6}}
\margl1440\margr1440\vieww28300\viewh16080\viewkind0
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0

\f0\fs24 \cf0 LASER SCAN DATA TAKING & ANALYSIS:\
\

\f1\i\b LabView VI\'92s
\f0\i0\b0 \
\
The LaserVI folder containing all VI for controlling the laser and Zaber motorized stages should be located in the Desktop directory of the operating/testing computer. Otherwise the location has to changed on the on the laser_auto.VI to have to the appropriate location for the log file to be written to. \
\
The VI for controlling the movement of the Zaber motorized stages which the laser is mounted on is LaserVI/motorControls/Controls.VI \
Vi Inputs: \
\pard\tx220\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\li720\fi-720\pardirnatural\partightenfactor0
\ls1\ilvl0\cf0 {\listtext	\uc0\u8226 	}
\f2\i Movement Command:
\f0\i0   \
\pard\tx940\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\li1440\fi-1440\pardirnatural\partightenfactor0
\ls1\ilvl1\cf0 {\listtext	\uc0\u8259 	}Home: Returns all the motorized stages to the home position which by default is set to the zero position but can be changed through Zaber Console.\
{\listtext	\uc0\u8259 	}Move: Movement of motorized stages, 2 options are available in movement type\
{\listtext	\uc0\u8259 	}Center: Moves all motorized stages to the inputs given in 
\f2\i Center Position
\f0\i0 \
\pard\tx220\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\li720\fi-720\pardirnatural\partightenfactor0
\ls1\ilvl0\cf0 {\listtext	\uc0\u8226 	}
\f2\i Movement Type:\
\pard\tx940\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\li1440\fi-1440\pardirnatural\partightenfactor0
\ls1\ilvl1\cf0 {\listtext	\uc0\u8259 	}Absolute:  
\f0\i0 Moves motorized stages the distance specified in 
\f2\i Movement Distance (mm)
\f0\i0  from the home position
\f2\i \
{\listtext	\uc0\u8259 	}Relative:   
\f0\i0 Moves motorized stages the distance specified in 
\f2\i Movement Distance (mm)
\f0\i0  from the current position of the stages
\f2\i \
\pard\tx220\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\li720\fi-720\pardirnatural\partightenfactor0
\ls1\ilvl0
\f0\i0 \cf0 {\listtext	\uc0\u8226 	}
\f2\i Max Move (mm): 
\f0\i0 Maximum total travel distance from home position. Movement will stop at this position if input movement will exceed these limits. 
\f2\i \
\ls1\ilvl0
\f0\i0 {\listtext	\uc0\u8226 	}
\f2\i Min Move (mm): 
\f0\i0 Minimum total travel distance from home position. Movement will stop to this position if input movement will be under these limits.
\f2\i \
\ls1\ilvl0
\f0\i0 {\listtext	\uc0\u8226 	}
\f2\i Center Position:  
\f0\i0 Specifies reference center position in millimeters 
\f2\i \
\ls1\ilvl0
\f0\i0 {\listtext	\uc0\u8226 	}
\f2\i Movement Distance (mm): 
\f0\i0 Specifies travel distance for each motorized stage in millimeters
\f2\i \
\ls1\ilvl0
\f0\i0 {\listtext	\uc0\u8226 	}
\f2\i \ul Microstep Size
\f0\i0 \ulnone : This input should not be changed at left as set, it corresponds to a scaling of inputs from the LabView to the correct physical distance. If change, one has to recalibrate by trial and error with the Zaber Console so that there is a 1:1 correspondence. \
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0
\cf0 \
Axis Calibration and Correction:\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural\partightenfactor0
\cf0 {{\NeXTGraphic Screenshot 2021-04-17 02.25.23.png \width15900 \height11664 \appleattachmentpadding0 \appleembedtype0 \appleaqc
}¬}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural\partightenfactor0
\cf0 \
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0
\cf0 \
Here in the back window of the VI, are the axis settings for the motorized stages. These values are dependent for the set up of the motorized stages so that they can match to the corresponding device. They can be changed using the Zaber Console program available for Windows, usually they are set in order of tethering. \
The axis corrections are used for orienting the axis to the preferred labeling. Currently is changes forward movement of Device 2 to correspond to negative Z-direction. \
\'97\'97\'97\'97\'97\'97\'97\'97\'97\'97\'97\
\
Laser VI commands\
\
The VI that controls the laser directly can be found at: LaserVI/Laser/visa_gpib_write_read_subvi_Labview18.VI\
This VI has inputs of characters to execute commands to the laser, the most necessary ones are:\
\pard\tx220\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\li720\fi-720\pardirnatural\partightenfactor0
\ls2\ilvl0\cf0 {\listtext	\uc0\u8226 	}ld=0/r \
{\listtext	\uc0\u8226 	}ld=1/r\
{\listtext	\uc0\u8226 	}ld?/r\
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0
\cf0  Which turn off, turn on, and check the status of the laser, respectively. \
\
\'97\'97\'97\'97\'97\'97\'97\'97\'97\'97\'97 \
\
The VI for scanning using the laser test stand is: LaserVi/Laser/laser_auto.VI\
This VI uses the two previous VI as sub VI. \
\
There are two modes that can be used for scanning:  Y-Scan and X-Scan, these are dependent on the \'91Controls\'92  parameters for the motor ID of each motor.\
In the current iteration, using the FST placement for reference, the Y-Scan corresponds to the Phi-axis of the FST, while X-scan corresponds to the Radial-axis of the FST. \
\
\
\
Vi Inputs:\
\pard\tx220\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\li720\fi-720\pardirnatural\partightenfactor0
\ls3\ilvl0\cf0 {\listtext	\uc0\u8226 	}
\f2\i Start Position: 
\f0\i0 Input the starting X and Y positions for the scan. One of these will remain constant depending on the scan type. The Z position is set default to be the -105, which is the Max Move set in Controls.VI
\f2\i \
{\listtext	\uc0\u8226 	}Stop Position: 
\f0\i0 Input the stopping X and Y positions for the scan. 
\f2\i \
{\listtext	\uc0\u8226 	}Seconds to Wait: 
\f0\i0 Seconds the VI will wait before moving the next position in the scan
\f2\i \
{\listtext	\uc0\u8226 	}Number of Steps: 
\f0\i0 The amount of steps in the scan, will be used to divide the distance from the starting position to the stop position. 
\f2\i \
{\listtext	\uc0\u8226 	}Run Count: 
\f0\i0 Used to number the scan for the day, as the log files are saved with naming according to the date. 
\f2\i \
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0

\f0\i0 \cf0 \
For the correct log file save location, it has to be set so that the LaserVI folder is in the correct directory, which is the Desktop of the computer. If it is not, this can be changed on the back window of the laser_auto.VI by changing this parameter:\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural\partightenfactor0
\cf0 {{\NeXTGraphic Screen Shot 2021-04-20 at 3.06.56 AM.png \width13040 \height12860 \appleattachmentpadding0 \appleembedtype0 \appleaqc
}¬}\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural\partightenfactor0
\cf0 \
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0
\cf0 \
\
\
\
\
___________________________________________________________________________________________________\
\

\f1\i\b Analysis Code
\f0\i0\b0 \
\
For all steps of the data analysis, the naming scheme of all necessary files should use a \'91date_run\'92 naming that is similar to the log file from laser_auto.VI. This is also what should be input for the \'91date\'92 variable in various scripts. The log files from laser_auto.VI also have to be transferred to the FstLaser/logs directory on the computer used for analysis. \
\
The code is the same structure that was made by Xu with slight adjustments, so the README file associated with it is necessary for using the set of code. \
 \
The initial step once build step is done, is creating the lists needed for some of the scripts. These can be found in the directory:  \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardirnatural\partightenfactor0

\f3\fs22 \cf2 \CocoaLigature0 FSTLaser/FstTracking/list/FST/cluster\
FSTLaser/FstTracking/list/FST/data
\f0\fs24 \cf0 \CocoaLigature1 \
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0
\cf0 The list only need to include the location of the root files used for the scripts. \
\
The next step is running the following scripts:\
\pard\tx220\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\li720\fi-720\pardirnatural\partightenfactor0
\ls4\ilvl0\cf0 {\listtext	1.	}FstLaser/FstTracking/macros/FstClusterMaker/makeFstCluster.C\
{\listtext	2.	}FstLaser/FstTracking/macros/FstQAStudy/doFstQAStudy.C\
{\listtext	3.	}FstLaser/FstTracking/macros/FstPlotSignalStudy/plotLaserScan.C\
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0
\cf0 \
For each, the correct date_run and other necessary variables should be changed.\
In regards to plotLaserScan.C:\
\pard\tx220\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\li720\fi-720\pardirnatural\partightenfactor0
\ls5\ilvl0\cf0 {\listtext	\uc0\u8226 	}The variable \'91numEvents_Laser\'92 corresponds to the number used for 
\f2\i Number of Steps
\f0\i0  in the laser_auto.VI.\
{\listtext	\uc0\u8226 	}The variable \'91eventRatio\'92 is used to adjust the width of the event range that will be plotted. This can be used to tune the number of events so that this will lead to greater correspondence to correct laser position. \
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0
\cf0 \
Data taking can also be done using only the Controls.VI and the laser_write.VI manually\
For the this case there are a couple additional steps that have to be taken:\
\pard\tx220\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\li720\fi-720\pardirnatural\partightenfactor0
\ls6\ilvl0\cf0 {\listtext	\uc0\u8226 	}In /FstLaser/FstTracking/src/FstQAStudy/FstQAStudy.cxx -> The global variable \'91eventDivisions\'92 must the set to the number of laser positions done in the in the data taking\
{\listtext	\uc0\u8226 	}The lists used for makeFstCluster.C must include all root files for the data taking\
{\listtext	\uc0\u8226 	}A log file that is used to track the positions of the laser must be made manually, it should follow the same template as the one used for laser_auto.VI\
{\listtext	\uc0\u8226 	}The script for plotting is located at FstLaser/FstTracking/macros/FstPlotSignalStudy/plotLaser.C \
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0
\cf0 \
\
___________________________________________________________________________________________________\
\

\f1\i\b Automated Data Taking Process\
\

\f0\i0\b0 To run automated laser data taking, we use the laser_auto.VI:\
1. When running the code for data taking on Starist, the number of events used is roughly: 
\f2\i Number of Steps
\f0\i0   x  
\f2\i Seconds to Wait
\f0\i0   x  Trigger Rate of events  + 1000\
2. After the code is run the data taking on the ARM, wait 1000 events to determine the pedestal in the code. \
3. Now, run the laser_auto.VI and transfer the log file to FstLaser/FstTracking/logs\

\f1\i\b \
\

\f0\i0\b0 I have the root files for the initial steps in RCF, the directory is:\
/star/data01/pwg/aaguil21/FSTDATA/Data\
The specific file need for this example is:\
/star/data01/pwg/aaguil21/FSTDATA/Data/FstCosmicTestStand_Mar2021/FstLaserTest_Mod03_FSTXX_03152021_4_HV70V_data_0.root\
This file is saved to FstLaser/data for the corresponding month in the date label. \
\
First the executable have to be built so going to the directory FSTLaser/FstTracking/build:\
1. cmake ..\
2. make install\
\
Then from the same directory you can run \
1. cd ../macros/FstClusterMaker/\
2. root -b -q makeFstCluster.C \
 - Here change the variable 
\f2\i date
\f0\i0  so that is matches with the root file: in this example is it 03152021_4\
 - Also check the HV labeling, if it was changed\
3. cd ../FstQAStudy/\
4. root -b -q doFstQAStudy.C\
 - Here change the variable 
\f2\i date
\f0\i0  so that is matches with the root file: in this example is it 03152021_4\
 - Also check the HV labeling, if it was changed\
5. cd ../FstPlotSignalStudy/\
6.root -b -q plotLaserScan.C\
 - Here check the variable 
\f2\i date
\f0\i0  so that is matches with the root file: in this example is it 03152021_4\
 - Also check the HV labeling, if it was changed\
 - Check that the number of events are equal to the number of event ranges given in the log file for the corresponding root file. \
\
\
____________________________________________________________________________________________________\
\

\f1\i\b Manual Data Taking Process
\f0\i0\b0 \
\
When running manual data taking there are a few steps.\
1.  First the code to take data on Starist is run for 1000 steps that will be used to calculate a pedestal of the Fst. This step will not be included in any of the histograms for this analysis.\
2.  A log file has to be create with the title 
\f2\i date_run_
\f0\i0 log.txt. Ex.:  01272021_1_log.txt\
3.  The contents of the log should follow the same outline as shown below. \
\
Events: 1000, y = 165.10 mm, x  = 90 mm , tune = 51.50%, Event Range 0\
\
4. \
\
\
\
The specific file need for this example is:\
/star/data01/pwg/aaguil21/FSTDATA/Data/FstCosmicTestStand_Jan2021/FstLaserTest_Mod03_FSTXX_01272021_1_HV70V_data_0.root\
\
The first step in analysis is editing the code located at FstLaser/FstTracking/src/FstQAStudy/FstQAStudy.cxx\
1. Change the const int 
\f2\i eventDIvisions
\f0\i0  to the number of event ranges used including event range 0 used for the pedestal]\
2. In the same file, change the const int 
\f2\i eventRangeSize
\f0\i0  to the number used for the event ranges in the data taking step\
\
Afterwards the executable has to be rebuilt so going to the directory FSTLaser/FstTracking/build:\
1. cmake ..\
2. make install\
\
Then from the same directory you can run \
1. cd ../macros/FstClusterMaker/\
2. root -b -q makeFstCluster.C \
 - Here change the variable 
\f2\i date
\f0\i0  so that is matches with the root file: in this example is it 01272021_1\
 - Also check the HV labeling, if it was changed\
3. cd ../FstQAStudy/\
4. root -b -q doFstQAStudy.C\
 - Here change the variable 
\f2\i date
\f0\i0  so that is matches with the root file: in this example is it 01272021_1\
 - Also check the HV labeling, if it was changed\
5. cd ../FstPlotSignalStudy/\
6.root -b -q plotLaserScan.C\
 - Here check the variable 
\f2\i date
\f0\i0  so that is matches with the root file: in this example is it 01272021_1\
 - Also check the HV labeling, if it was changed\
 - Check that the number of events are equal to the number of event ranges given in the log file for the corresponding root file: For this example it is 21\
\
\
}